{
  "permissions": {
    "allow": [
      "Bash(dir:*)",
      "Bash(npx tsc:*)",
      "Bash(npm run build:*)",
      "Bash(npx vite:*)",
      "Bash(timeout:*)",
      "Bash(npm run dev:*)",
      "Bash(start:*)",
      "Bash(ping:*)",
      "Bash(git rm:*)",
      "Bash(git reset:*)",
      "Bash(git add:*)",
      "Bash(npm run deploy:*)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\types\\\\session.ts\" << 'EOF'\nexport interface PomodoroSession {\n  date: string;\n  duration: number;\n  label?: string; // optional label for time tracking \\(e.g. 'Language', 'Study'\\)\n}\n\nexport interface LabelDefinition {\n  id: string;\n  name: string;\n  color: string;\n}\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\types\\\\settings.ts\" << 'EOF'\nimport type { Language } from '@/i18n';\nimport type { LabelDefinition } from '@/types/session';\n\nexport type ThemeMode = 'light' | 'dark';\n\nexport type AlarmSound = 'bell' | 'digital' | 'chime' | 'none';\n\nexport interface AlarmSettings {\n  sound: AlarmSound;\n  repeat: number; // 1-5\n}\n\nexport interface PomodoroSettings {\n  workTime: number;\n  breakTime: number;\n  longBreakTime: number;       // 0 = OFF\n  longBreakInterval: number;   // 0 = OFF, otherwise every N sessions\n  customMessage: string;\n  language: Language;\n  activePresets: number[];\n  restPresets: number[];\n  theme: ThemeMode;\n  alarm: AlarmSettings;\n  labels: LabelDefinition[];\n  activeLabel: string | null;  // id of selected label, null = no label\n}\n\nexport const DEFAULT_ACTIVE_PRESETS = [15, 25, 35, 45];\nexport const DEFAULT_REST_PRESETS = [0, 3, 5, 10];\n\nexport const DEFAULT_SETTINGS: PomodoroSettings = {\n  workTime: 25,\n  breakTime: 5,\n  longBreakTime: 0,\n  longBreakInterval: 0,\n  customMessage: '',\n  language: 'en',\n  activePresets: DEFAULT_ACTIVE_PRESETS,\n  restPresets: DEFAULT_REST_PRESETS,\n  theme: 'light',\n  alarm: { sound: 'bell', repeat: 1 },\n  labels: [],\n  activeLabel: null,\n};\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\i18n\\\\types.ts\" << 'EOF'\nexport const SUPPORTED_LANGUAGES = ['en', 'ja', 'es', 'pt', 'de', 'fr', 'it'] as const;\n\nexport type Language = \\(typeof SUPPORTED_LANGUAGES\\)[number];\n\nexport interface Translations {\n  // Language metadata\n  languageName: string;\n\n  // Header\n  appTitle: string;\n\n  // Timer\n  restMode: string;\n  longBreakMode: string;\n\n  // Settings\n  settings: string;\n  activeTimeLabel: string;\n  restTimeLabel: string;\n  longBreakTimeLabel: string;\n  longBreakIntervalLabel: string;\n  customMessageLabel: string;\n  languageLabel: string;\n  applySettings: string;\n  customInput: string;\n  presetSettingsLabel: string;\n  activePresetsLabel: string;\n  restPresetsLabel: string;\n  addPreset: string;\n  restOffLabel: string;\n  themeLabel: string;\n  themeLight: string;\n  themeDark: string;\n\n  // Alarm settings\n  alarmLabel: string;\n  alarmSoundBell: string;\n  alarmSoundDigital: string;\n  alarmSoundChime: string;\n  alarmSoundNone: string;\n  alarmRepeatLabel: string;\n\n  // Labels\n  labelsLabel: string;\n  addLabel: string;\n  activeLabelLabel: string;\n  noLabel: string;\n\n  // Stats\n  weeklyStats: string;\n  weekly: string;\n  monthly: string;\n  yearly: string;\n  today: string;\n  thisWeek: string;\n  totalTime: string;\n  sessions: string;\n  previousWeek: string;\n  nextWeek: string;\n  previousMonth: string;\n  nextMonth: string;\n  previousYear: string;\n  nextYear: string;\n  exportCsv: string;\n\n  // Install banner\n  installApp: string;\n\n  // Days of week \\(Mon-Sun\\)\n  days: readonly [string, string, string, string, string, string, string];\n\n  // Months\n  months: readonly [string, string, string, string, string, string, string, string, string, string, string, string];\n\n  // Default custom message\n  defaultCustomMessage: string;\n}\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\i18n\\\\en.ts\" << 'EOF'\nimport type { Translations } from './types';\n\nexport const en: Translations = {\n  languageName: 'English',\n  appTitle: 'Pomodoro',\n  restMode: 'Rest',\n  longBreakMode: 'Long Break',\n  settings: 'Settings',\n  activeTimeLabel: 'Active \\(min\\)',\n  restTimeLabel: 'Rest \\(min\\)',\n  longBreakTimeLabel: 'Long Break \\(min\\)',\n  longBreakIntervalLabel: 'Long Break every N sessions',\n  customMessageLabel: 'Custom Message',\n  languageLabel: 'Language',\n  applySettings: 'Apply Settings',\n  customInput: 'Custom',\n  presetSettingsLabel: 'Preset Options',\n  activePresetsLabel: 'Active Presets',\n  restPresetsLabel: 'Rest Presets',\n  addPreset: 'Add',\n  restOffLabel: 'OFF',\n  themeLabel: 'Theme',\n  themeLight: 'Light',\n  themeDark: 'Dark',\n  alarmLabel: 'Alarm Sound',\n  alarmSoundBell: 'Bell',\n  alarmSoundDigital: 'Digital',\n  alarmSoundChime: 'Chime',\n  alarmSoundNone: 'None',\n  alarmRepeatLabel: 'Repeat',\n  labelsLabel: 'Labels',\n  addLabel: 'Add Label',\n  activeLabelLabel: 'Active Label',\n  noLabel: 'No Label',\n  weeklyStats: 'Weekly Stats',\n  weekly: 'Weekly',\n  monthly: 'Monthly',\n  yearly: 'Yearly',\n  today: 'Today',\n  thisWeek: 'This Week',\n  totalTime: 'Total Time',\n  sessions: 'sessions',\n  previousWeek: '\\\\u2190 Previous Week',\n  nextWeek: 'Next Week \\\\u2192',\n  previousMonth: '\\\\u2190 Previous Month',\n  nextMonth: 'Next Month \\\\u2192',\n  previousYear: '\\\\u2190 Previous Year',\n  nextYear: 'Next Year \\\\u2192',\n  exportCsv: 'Export CSV',\n  installApp: 'Install as App',\n  days: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\n  months: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  defaultCustomMessage: 'Stand up, look into the distance, and do a light stretch.',\n};\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\i18n\\\\ja.ts\" << 'EOF'\nimport type { Translations } from './types';\n\nexport const ja: Translations = {\n  languageName: '日本語',\n  appTitle: 'Pomodoro',\n  restMode: 'レスト',\n  longBreakMode: '長めの休憩',\n  settings: '設定',\n  activeTimeLabel: 'アクティブ（分）',\n  restTimeLabel: 'レスト（分）',\n  longBreakTimeLabel: '長めの休憩（分）',\n  longBreakIntervalLabel: '長めの休憩を入れるインターバル（セット数）',\n  customMessageLabel: 'カスタムメッセージ',\n  languageLabel: '言語',\n  applySettings: '設定を適用',\n  customInput: 'カスタム',\n  presetSettingsLabel: 'プリセット設定',\n  activePresetsLabel: 'アクティブ プリセット',\n  restPresetsLabel: 'レスト プリセット',\n  addPreset: '追加',\n  restOffLabel: 'OFF',\n  themeLabel: 'テーマ',\n  themeLight: 'ライト',\n  themeDark: 'ダーク',\n  alarmLabel: 'アラーム音',\n  alarmSoundBell: 'ベル',\n  alarmSoundDigital: 'デジタル',\n  alarmSoundChime: 'チャイム',\n  alarmSoundNone: 'なし',\n  alarmRepeatLabel: '繰り返し',\n  labelsLabel: 'ラベル',\n  addLabel: 'ラベルを追加',\n  activeLabelLabel: '使用中のラベル',\n  noLabel: 'ラベルなし',\n  weeklyStats: '週間',\n  weekly: '週間',\n  monthly: '月間',\n  yearly: '年間',\n  today: '今日',\n  thisWeek: '今週',\n  totalTime: '合計時間',\n  sessions: 'セット',\n  previousWeek: '\\\\u2190 前の週',\n  nextWeek: '次の週 \\\\u2192',\n  previousMonth: '\\\\u2190 前の月',\n  nextMonth: '次の月 \\\\u2192',\n  previousYear: '\\\\u2190 前の年',\n  nextYear: '次の年 \\\\u2192',\n  exportCsv: 'CSVエクスポート',\n  installApp: 'アプリとしてインストール',\n  days: ['月', '火', '水', '木', '金', '土', '日'],\n  months: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n  defaultCustomMessage: '立ち上がって遠くを見ながら、軽くストレッチしましょう',\n};\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\i18n\\\\es.ts\" << 'EOF'\nimport type { Translations } from './types';\n\nexport const es: Translations = {\n  languageName: 'Español',\n  appTitle: 'Pomodoro',\n  restMode: 'Descanso',\n  longBreakMode: 'Descanso largo',\n  settings: 'Configuración',\n  activeTimeLabel: 'Activo \\(min\\)',\n  restTimeLabel: 'Descanso \\(min\\)',\n  longBreakTimeLabel: 'Descanso largo \\(min\\)',\n  longBreakIntervalLabel: 'Descanso largo cada N sesiones',\n  customMessageLabel: 'Mensaje personalizado',\n  languageLabel: 'Idioma',\n  applySettings: 'Aplicar configuración',\n  customInput: 'Personalizar',\n  presetSettingsLabel: 'Opciones preestablecidas',\n  activePresetsLabel: 'Presets de activo',\n  restPresetsLabel: 'Presets de descanso',\n  addPreset: 'Añadir',\n  restOffLabel: 'OFF',\n  themeLabel: 'Tema',\n  themeLight: 'Claro',\n  themeDark: 'Oscuro',\n  alarmLabel: 'Sonido de alarma',\n  alarmSoundBell: 'Campana',\n  alarmSoundDigital: 'Digital',\n  alarmSoundChime: 'Carillón',\n  alarmSoundNone: 'Ninguno',\n  alarmRepeatLabel: 'Repetir',\n  labelsLabel: 'Etiquetas',\n  addLabel: 'Añadir etiqueta',\n  activeLabelLabel: 'Etiqueta activa',\n  noLabel: 'Sin etiqueta',\n  weeklyStats: 'Estadísticas semanales',\n  weekly: 'Semana',\n  monthly: 'Mes',\n  yearly: 'Año',\n  today: 'Hoy',\n  thisWeek: 'Esta semana',\n  totalTime: 'Tiempo total',\n  sessions: 'sesiones',\n  previousWeek: '\\\\u2190 Semana anterior',\n  nextWeek: 'Semana siguiente \\\\u2192',\n  previousMonth: '\\\\u2190 Mes anterior',\n  nextMonth: 'Mes siguiente \\\\u2192',\n  previousYear: '\\\\u2190 Año anterior',\n  nextYear: 'Año siguiente \\\\u2192',\n  exportCsv: 'Exportar CSV',\n  installApp: 'Instalar como app',\n  days: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'],\n  months: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],\n  defaultCustomMessage: 'Levántate, mira a lo lejos y haz un estiramiento ligero.',\n};\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\i18n\\\\pt.ts\" << 'EOF'\nimport type { Translations } from './types';\n\nexport const pt: Translations = {\n  languageName: 'Português',\n  appTitle: 'Pomodoro',\n  restMode: 'Pausa',\n  longBreakMode: 'Pausa longa',\n  settings: 'Configurações',\n  activeTimeLabel: 'Ativo \\(min\\)',\n  restTimeLabel: 'Pausa \\(min\\)',\n  longBreakTimeLabel: 'Pausa longa \\(min\\)',\n  longBreakIntervalLabel: 'Pausa longa a cada N sessões',\n  customMessageLabel: 'Mensagem personalizada',\n  languageLabel: 'Idioma',\n  applySettings: 'Aplicar configurações',\n  customInput: 'Personalizar',\n  presetSettingsLabel: 'Opções predefinidas',\n  activePresetsLabel: 'Presets de ativo',\n  restPresetsLabel: 'Presets de pausa',\n  addPreset: 'Adicionar',\n  restOffLabel: 'OFF',\n  themeLabel: 'Tema',\n  themeLight: 'Claro',\n  themeDark: 'Escuro',\n  alarmLabel: 'Som de alarme',\n  alarmSoundBell: 'Sino',\n  alarmSoundDigital: 'Digital',\n  alarmSoundChime: 'Carrilhão',\n  alarmSoundNone: 'Nenhum',\n  alarmRepeatLabel: 'Repetir',\n  labelsLabel: 'Rótulos',\n  addLabel: 'Adicionar rótulo',\n  activeLabelLabel: 'Rótulo ativo',\n  noLabel: 'Sem rótulo',\n  weeklyStats: 'Estatísticas semanais',\n  weekly: 'Semana',\n  monthly: 'Mês',\n  yearly: 'Ano',\n  today: 'Hoje',\n  thisWeek: 'Esta semana',\n  totalTime: 'Tempo total',\n  sessions: 'sessões',\n  previousWeek: '\\\\u2190 Semana anterior',\n  nextWeek: 'Próxima semana \\\\u2192',\n  previousMonth: '\\\\u2190 Mês anterior',\n  nextMonth: 'Próximo mês \\\\u2192',\n  previousYear: '\\\\u2190 Ano anterior',\n  nextYear: 'Próximo ano \\\\u2192',\n  exportCsv: 'Exportar CSV',\n  installApp: 'Instalar como app',\n  days: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],\n  months: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],\n  defaultCustomMessage: 'Levante-se, olhe para longe e faça um alongamento leve.',\n};\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\i18n\\\\de.ts\" << 'EOF'\nimport type { Translations } from './types';\n\nexport const de: Translations = {\n  languageName: 'Deutsch',\n  appTitle: 'Pomodoro',\n  restMode: 'Pause',\n  longBreakMode: 'Lange Pause',\n  settings: 'Einstellungen',\n  activeTimeLabel: 'Aktiv \\(Min\\)',\n  restTimeLabel: 'Pause \\(Min\\)',\n  longBreakTimeLabel: 'Lange Pause \\(Min\\)',\n  longBreakIntervalLabel: 'Lange Pause alle N Einheiten',\n  customMessageLabel: 'Eigene Nachricht',\n  languageLabel: 'Sprache',\n  applySettings: 'Einstellungen übernehmen',\n  customInput: 'Benutzerdefiniert',\n  presetSettingsLabel: 'Voreinstellungen',\n  activePresetsLabel: 'Aktiv-Voreinstellungen',\n  restPresetsLabel: 'Pause-Voreinstellungen',\n  addPreset: 'Hinzufügen',\n  restOffLabel: 'AUS',\n  themeLabel: 'Design',\n  themeLight: 'Hell',\n  themeDark: 'Dunkel',\n  alarmLabel: 'Alarmton',\n  alarmSoundBell: 'Glocke',\n  alarmSoundDigital: 'Digital',\n  alarmSoundChime: 'Chime',\n  alarmSoundNone: 'Keiner',\n  alarmRepeatLabel: 'Wiederholen',\n  labelsLabel: 'Beschriftungen',\n  addLabel: 'Beschriftung hinzufügen',\n  activeLabelLabel: 'Aktive Beschriftung',\n  noLabel: 'Keine Beschriftung',\n  weeklyStats: 'Wochenstatistik',\n  weekly: 'Woche',\n  monthly: 'Monat',\n  yearly: 'Jahr',\n  today: 'Heute',\n  thisWeek: 'Diese Woche',\n  totalTime: 'Gesamtzeit',\n  sessions: 'Einheiten',\n  previousWeek: '\\\\u2190 Vorherige Woche',\n  nextWeek: 'Nächste Woche \\\\u2192',\n  previousMonth: '\\\\u2190 Vorheriger Monat',\n  nextMonth: 'Nächster Monat \\\\u2192',\n  previousYear: '\\\\u2190 Vorheriges Jahr',\n  nextYear: 'Nächstes Jahr \\\\u2192',\n  exportCsv: 'CSV exportieren',\n  installApp: 'Als App installieren',\n  days: ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'],\n  months: ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],\n  defaultCustomMessage: 'Steh auf, schau in die Ferne und mach eine leichte Dehnübung.',\n};\nEOF)",
      "Bash(__NEW_LINE_c032f72cfb5ed8f0__ cat)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\i18n\\\\fr.ts\" << 'EOF'\nimport type { Translations } from './types';\n\nexport const fr: Translations = {\n  languageName: 'Français',\n  appTitle: 'Pomodoro',\n  restMode: 'Pause',\n  longBreakMode: 'Longue pause',\n  settings: 'Paramètres',\n  activeTimeLabel: 'Actif \\(min\\)',\n  restTimeLabel: 'Pause \\(min\\)',\n  longBreakTimeLabel: 'Longue pause \\(min\\)',\n  longBreakIntervalLabel: 'Longue pause toutes les N sessions',\n  customMessageLabel: 'Message personnalisé',\n  languageLabel: 'Langue',\n  applySettings: 'Appliquer les paramètres',\n  customInput: 'Personnaliser',\n  presetSettingsLabel: 'Options prédéfinies',\n  activePresetsLabel: 'Préréglages actifs',\n  restPresetsLabel: 'Préréglages de pause',\n  addPreset: 'Ajouter',\n  restOffLabel: 'OFF',\n  themeLabel: 'Thème',\n  themeLight: 'Clair',\n  themeDark: 'Sombre',\n  alarmLabel: \"Son d'alarme\",\n  alarmSoundBell: 'Cloche',\n  alarmSoundDigital: 'Numérique',\n  alarmSoundChime: 'Carillon',\n  alarmSoundNone: 'Aucun',\n  alarmRepeatLabel: 'Répéter',\n  labelsLabel: 'Étiquettes',\n  addLabel: 'Ajouter une étiquette',\n  activeLabelLabel: 'Étiquette active',\n  noLabel: 'Sans étiquette',\n  weeklyStats: 'Statistiques hebdomadaires',\n  weekly: 'Semaine',\n  monthly: 'Mois',\n  yearly: 'Année',\n  today: \"Aujourd'hui\",\n  thisWeek: 'Cette semaine',\n  totalTime: 'Temps total',\n  sessions: 'sessions',\n  previousWeek: '\\\\u2190 Semaine précédente',\n  nextWeek: 'Semaine suivante \\\\u2192',\n  previousMonth: '\\\\u2190 Mois précédent',\n  nextMonth: 'Mois suivant \\\\u2192',\n  previousYear: '\\\\u2190 Année précédente',\n  nextYear: 'Année suivante \\\\u2192',\n  exportCsv: 'Exporter CSV',\n  installApp: \"Installer l'application\",\n  days: ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'],\n  months: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin', 'Juil', 'Aoû', 'Sep', 'Oct', 'Nov', 'Déc'],\n  defaultCustomMessage: 'Levez-vous, regardez au loin et faites un léger étirement.',\n};\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\i18n\\\\it.ts\" << 'EOF'\nimport type { Translations } from './types';\n\nexport const it: Translations = {\n  languageName: 'Italiano',\n  appTitle: 'Pomodoro',\n  restMode: 'Pausa',\n  longBreakMode: 'Pausa lunga',\n  settings: 'Impostazioni',\n  activeTimeLabel: 'Attivo \\(min\\)',\n  restTimeLabel: 'Pausa \\(min\\)',\n  longBreakTimeLabel: 'Pausa lunga \\(min\\)',\n  longBreakIntervalLabel: 'Pausa lunga ogni N sessioni',\n  customMessageLabel: 'Messaggio personalizzato',\n  languageLabel: 'Lingua',\n  applySettings: 'Applica impostazioni',\n  customInput: 'Personalizza',\n  presetSettingsLabel: 'Opzioni preimpostate',\n  activePresetsLabel: 'Preset attivi',\n  restPresetsLabel: 'Preset di pausa',\n  addPreset: 'Aggiungi',\n  restOffLabel: 'OFF',\n  themeLabel: 'Tema',\n  themeLight: 'Chiaro',\n  themeDark: 'Scuro',\n  alarmLabel: 'Suono alarme',\n  alarmSoundBell: 'Campanello',\n  alarmSoundDigital: 'Digitale',\n  alarmSoundChime: 'Carillon',\n  alarmSoundNone: 'Nessuno',\n  alarmRepeatLabel: 'Ripeti',\n  labelsLabel: 'Etichette',\n  addLabel: 'Aggiungi etichetta',\n  activeLabelLabel: 'Etichetta attiva',\n  noLabel: 'Nessuna etichetta',\n  weeklyStats: 'Statistiche settimanali',\n  weekly: 'Settimana',\n  monthly: 'Mese',\n  yearly: 'Anno',\n  today: 'Oggi',\n  thisWeek: 'Questa settimana',\n  totalTime: 'Tempo totale',\n  sessions: 'sessioni',\n  previousWeek: '\\\\u2190 Settimana precedente',\n  nextWeek: 'Settimana successiva \\\\u2192',\n  previousMonth: '\\\\u2190 Mese precedente',\n  nextMonth: 'Mese successivo \\\\u2192',\n  previousYear: '\\\\u2190 Anno precedente',\n  nextYear: 'Anno successivo \\\\u2192',\n  exportCsv: 'Esporta CSV',\n  installApp: \"Installa l'app\",\n  days: ['Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab', 'Dom'],\n  months: ['Gen', 'Feb', 'Mar', 'Apr', 'Mag', 'Giu', 'Lug', 'Ago', 'Set', 'Ott', 'Nov', 'Dic'],\n  defaultCustomMessage: 'Alzati, guarda in lontananza e fai un leggero stretching.',\n};\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\hooks\\\\useSessions.ts\" << 'EOF'\nimport { useState, useEffect, useCallback } from 'react';\nimport type { PomodoroSession } from '@/types/session';\nimport type { StorageService } from '@/services/storage/types';\nimport type { Translations } from '@/i18n';\nimport { getWeekStartDate } from '@/utils/date';\n\nexport interface DayData {\n  day: string;\n  date: Date;\n  count: number;\n  totalSeconds: number;\n}\n\nexport interface MonthDayData {\n  date: Date;\n  count: number;\n  totalSeconds: number;\n}\n\nexport function useSessions\\(storage: StorageService, days: Translations['days']\\) {\n  const [sessions, setSessions] = useState<PomodoroSession[]>\\([]\\);\n\n  useEffect\\(\\(\\) => {\n    storage.getSessions\\(\\).then\\(setSessions\\);\n  }, [storage]\\);\n\n  const addSession = useCallback\\(\n    async \\(session: PomodoroSession\\) => {\n      setSessions\\(\\(prev\\) => {\n        const updated = [...prev, session];\n        storage.saveSessions\\(updated\\);\n        return updated;\n      }\\);\n    },\n    [storage],\n  \\);\n\n  const getTodayCount = useCallback\\(\\(\\) => {\n    const today = new Date\\(\\).toDateString\\(\\);\n    return sessions.filter\\(\\(s\\) => new Date\\(s.date\\).toDateString\\(\\) === today\\).length;\n  }, [sessions]\\);\n\n  const getTodayTotalSeconds = useCallback\\(\\(\\) => {\n    const today = new Date\\(\\).toDateString\\(\\);\n    return sessions\n      .filter\\(\\(s\\) => new Date\\(s.date\\).toDateString\\(\\) === today\\)\n      .reduce\\(\\(sum, s\\) => sum + s.duration, 0\\);\n  }, [sessions]\\);\n\n  const getWeekCount = useCallback\\(\\(\\) => {\n    const weekAgo = new Date\\(\\);\n    weekAgo.setDate\\(weekAgo.getDate\\(\\) - 7\\);\n    return sessions.filter\\(\\(s\\) => new Date\\(s.date\\) >= weekAgo\\).length;\n  }, [sessions]\\);\n\n  const getWeekTotalSeconds = useCallback\\(\\(\\) => {\n    const weekAgo = new Date\\(\\);\n    weekAgo.setDate\\(weekAgo.getDate\\(\\) - 7\\);\n    return sessions\n      .filter\\(\\(s\\) => new Date\\(s.date\\) >= weekAgo\\)\n      .reduce\\(\\(sum, s\\) => sum + s.duration, 0\\);\n  }, [sessions]\\);\n\n  const getWeekData = useCallback\\(\n    \\(weekOffset: number\\): DayData[] => {\n      const startOfWeek = getWeekStartDate\\(weekOffset\\);\n\n      return days.map\\(\\(day, i\\) => {\n        const currentDay = new Date\\(startOfWeek\\);\n        currentDay.setDate\\(startOfWeek.getDate\\(\\) + i\\);\n        const dayString = currentDay.toDateString\\(\\);\n        const daySessions = sessions.filter\\(\n          \\(s\\) => new Date\\(s.date\\).toDateString\\(\\) === dayString,\n        \\);\n        const count = daySessions.length;\n        const totalSeconds = daySessions.reduce\\(\\(sum, s\\) => sum + s.duration, 0\\);\n\n        return { day, date: currentDay, count, totalSeconds };\n      }\\);\n    },\n    [sessions, days],\n  \\);\n\n  // Returns data for each day of a given month\n  // monthOffset: 0 = current month, 1 = last month, etc.\n  const getMonthData = useCallback\\(\n    \\(monthOffset: number\\): MonthDayData[] => {\n      const now = new Date\\(\\);\n      const year = now.getFullYear\\(\\);\n      const month = now.getMonth\\(\\) - monthOffset;\n      const target = new Date\\(year, month, 1\\);\n      const targetYear = target.getFullYear\\(\\);\n      const targetMonth = target.getMonth\\(\\);\n      const daysInMonth = new Date\\(targetYear, targetMonth + 1, 0\\).getDate\\(\\);\n\n      const result: MonthDayData[] = [];\n      for \\(let d = 1; d <= daysInMonth; d++\\) {\n        const date = new Date\\(targetYear, targetMonth, d\\);\n        const dayString = date.toDateString\\(\\);\n        const daySessions = sessions.filter\\(\n          \\(s\\) => new Date\\(s.date\\).toDateString\\(\\) === dayString,\n        \\);\n        result.push\\({\n          date,\n          count: daySessions.length,\n          totalSeconds: daySessions.reduce\\(\\(sum, s\\) => sum + s.duration, 0\\),\n        }\\);\n      }\n      return result;\n    },\n    [sessions],\n  \\);\n\n  // Returns an array of 12 months' aggregated data for a given year\n  // yearOffset: 0 = current year, 1 = last year, etc.\n  const getYearData = useCallback\\(\n    \\(yearOffset: number\\): { month: string; count: number; totalSeconds: number }[] => {\n      const targetYear = new Date\\(\\).getFullYear\\(\\) - yearOffset;\n      return Array.from\\({ length: 12 }, \\(_, m\\) => {\n        const monthSessions = sessions.filter\\(\\(s\\) => {\n          const d = new Date\\(s.date\\);\n          return d.getFullYear\\(\\) === targetYear && d.getMonth\\(\\) === m;\n        }\\);\n        return {\n          month: String\\(m\\), // month index as string; display name handled in component\n          count: monthSessions.length,\n          totalSeconds: monthSessions.reduce\\(\\(sum, s\\) => sum + s.duration, 0\\),\n        };\n      }\\);\n    },\n    [sessions],\n  \\);\n\n  // Returns all sessions for label-based filtering\n  const getLabelTotalSeconds = useCallback\\(\n    \\(label: string | null\\): number => {\n      if \\(!label\\) {\n        return sessions.reduce\\(\\(sum, s\\) => sum + s.duration, 0\\);\n      }\n      return sessions\n        .filter\\(\\(s\\) => s.label === label\\)\n        .reduce\\(\\(sum, s\\) => sum + s.duration, 0\\);\n    },\n    [sessions],\n  \\);\n\n  return {\n    sessions,\n    addSession,\n    getTodayCount,\n    getTodayTotalSeconds,\n    getWeekCount,\n    getWeekTotalSeconds,\n    getWeekData,\n    getMonthData,\n    getYearData,\n    getLabelTotalSeconds,\n  };\n}\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\utils\\\\alarm.ts\" << 'EOF'\nimport type { AlarmSound } from '@/types/settings';\n\n/**\n * Generate alarm sound using Web Audio API \\(no external audio files needed\\)\n */\nfunction createAudioContext\\(\\): AudioContext | null {\n  try {\n    return new \\(window.AudioContext || \\(window as unknown as { webkitAudioContext: typeof AudioContext }\\).webkitAudioContext\\)\\(\\);\n  } catch {\n    return null;\n  }\n}\n\nfunction playBell\\(ctx: AudioContext, startTime: number\\): number {\n  const duration = 1.5;\n  // Fundamental + harmonics for bell-like sound\n  const freqs = [880, 1760, 2640];\n  freqs.forEach\\(\\(freq, i\\) => {\n    const osc = ctx.createOscillator\\(\\);\n    const gain = ctx.createGain\\(\\);\n    osc.connect\\(gain\\);\n    gain.connect\\(ctx.destination\\);\n    osc.type = 'sine';\n    osc.frequency.setValueAtTime\\(freq, startTime\\);\n    const vol = 0.3 / \\(i + 1\\);\n    gain.gain.setValueAtTime\\(vol, startTime\\);\n    gain.gain.exponentialRampToValueAtTime\\(0.001, startTime + duration\\);\n    osc.start\\(startTime\\);\n    osc.stop\\(startTime + duration\\);\n  }\\);\n  return duration;\n}\n\nfunction playDigital\\(ctx: AudioContext, startTime: number\\): number {\n  // Two-tone digital beep\n  const beepDuration = 0.15;\n  const gap = 0.05;\n  const tones = [1000, 1200];\n  tones.forEach\\(\\(freq, i\\) => {\n    const t = startTime + i * \\(beepDuration + gap\\);\n    const osc = ctx.createOscillator\\(\\);\n    const gain = ctx.createGain\\(\\);\n    osc.connect\\(gain\\);\n    gain.connect\\(ctx.destination\\);\n    osc.type = 'square';\n    osc.frequency.setValueAtTime\\(freq, t\\);\n    gain.gain.setValueAtTime\\(0.2, t\\);\n    gain.gain.setValueAtTime\\(0.2, t + beepDuration - 0.01\\);\n    gain.gain.linearRampToValueAtTime\\(0, t + beepDuration\\);\n    osc.start\\(t\\);\n    osc.stop\\(t + beepDuration\\);\n  }\\);\n  return beepDuration * 2 + gap;\n}\n\nfunction playChime\\(ctx: AudioContext, startTime: number\\): number {\n  // Three ascending notes\n  const notes = [523.25, 659.25, 783.99]; // C5, E5, G5\n  const noteDuration = 0.4;\n  const noteGap = 0.15;\n  notes.forEach\\(\\(freq, i\\) => {\n    const t = startTime + i * \\(noteDuration * 0.6 + noteGap\\);\n    const osc = ctx.createOscillator\\(\\);\n    const gain = ctx.createGain\\(\\);\n    osc.connect\\(gain\\);\n    gain.connect\\(ctx.destination\\);\n    osc.type = 'sine';\n    osc.frequency.setValueAtTime\\(freq, t\\);\n    gain.gain.setValueAtTime\\(0.3, t\\);\n    gain.gain.exponentialRampToValueAtTime\\(0.001, t + noteDuration\\);\n    osc.start\\(t\\);\n    osc.stop\\(t + noteDuration\\);\n  }\\);\n  return notes.length * \\(noteDuration * 0.6 + noteGap\\) + noteDuration;\n}\n\nexport function playAlarm\\(sound: AlarmSound, repeat: number\\): void {\n  if \\(sound === 'none'\\) return;\n\n  const ctx = createAudioContext\\(\\);\n  if \\(!ctx\\) return;\n\n  // Resume suspended context \\(required after user interaction\\)\n  const resume = ctx.state === 'suspended' ? ctx.resume\\(\\) : Promise.resolve\\(\\);\n  resume.then\\(\\(\\) => {\n    const now = ctx.currentTime;\n    let singleDuration = 0;\n\n    for \\(let i = 0; i < repeat; i++\\) {\n      const t = now + i * \\(singleDuration + 0.3\\);\n      if \\(sound === 'bell'\\) {\n        singleDuration = playBell\\(ctx, t\\);\n      } else if \\(sound === 'digital'\\) {\n        singleDuration = playDigital\\(ctx, t\\);\n      } else if \\(sound === 'chime'\\) {\n        singleDuration = playChime\\(ctx, t\\);\n      }\n    }\n\n    // Close context after all sounds finish\n    const totalDuration = repeat * \\(singleDuration + 0.3\\) + 1;\n    setTimeout\\(\\(\\) => ctx.close\\(\\), totalDuration * 1000\\);\n  }\\);\n}\n\n/** Preview a single play for settings UI */\nexport function previewAlarm\\(sound: AlarmSound\\): void {\n  playAlarm\\(sound, 1\\);\n}\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\hooks\\\\useTimer.ts\" << 'EOF'\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport type { TimerMode } from '@/types/timer';\nimport type { PomodoroSession } from '@/types/session';\nimport type { AlarmSettings } from '@/types/settings';\nimport { analytics } from '@/services/analytics/AnalyticsService';\nimport { playAlarm } from '@/utils/alarm';\n\ninterface UseTimerOptions {\n  workTime: number;\n  breakTime: number;\n  longBreakTime: number;      // 0 = disabled\n  longBreakInterval: number;  // 0 = disabled, else trigger every N completed work sessions\n  alarm: AlarmSettings;\n  activeLabel: string | null;\n  onSessionComplete: \\(session: PomodoroSession\\) => void;\n}\n\nexport function useTimer\\({\n  workTime,\n  breakTime,\n  longBreakTime,\n  longBreakInterval,\n  alarm,\n  activeLabel,\n  onSessionComplete,\n}: UseTimerOptions\\) {\n  const [timeLeft, setTimeLeft] = useState\\(workTime * 60\\);\n  const [isRunning, setIsRunning] = useState\\(false\\);\n  const [mode, setMode] = useState<TimerMode>\\('work'\\);\n  // Count of completed work sessions \\(used to trigger long break\\)\n  const completedSessionsRef = useRef\\(0\\);\n\n  // Sync timeLeft only when workTime setting changes while not running\n  const prevWorkTimeRef = useRef\\(workTime\\);\n  useEffect\\(\\(\\) => {\n    if \\(prevWorkTimeRef.current !== workTime && !isRunning && mode === 'work'\\) {\n      setTimeLeft\\(workTime * 60\\);\n    }\n    prevWorkTimeRef.current = workTime;\n  }, [workTime, isRunning, mode]\\);\n\n  useEffect\\(\\(\\) => {\n    let interval: ReturnType<typeof setInterval> | null = null;\n\n    if \\(isRunning && timeLeft > 0\\) {\n      interval = setInterval\\(\\(\\) => {\n        setTimeLeft\\(\\(time\\) => time - 1\\);\n      }, 1000\\);\n    } else if \\(timeLeft === 0 && isRunning\\) {\n      setIsRunning\\(false\\);\n\n      // Play alarm\n      playAlarm\\(alarm.sound, alarm.repeat\\);\n\n      if \\(mode === 'work'\\) {\n        const session: PomodoroSession = {\n          date: new Date\\(\\).toISOString\\(\\),\n          duration: workTime * 60,\n          label: activeLabel ?? undefined,\n        };\n        onSessionComplete\\(session\\);\n        analytics.track\\({ name: 'session_completed', properties: { duration: workTime } }\\);\n\n        completedSessionsRef.current += 1;\n\n        // Determine next break type\n        const shouldLongBreak =\n          longBreakTime > 0 &&\n          longBreakInterval > 0 &&\n          completedSessionsRef.current % longBreakInterval === 0;\n\n        if \\(shouldLongBreak\\) {\n          setMode\\('longBreak' as TimerMode\\);\n          setTimeLeft\\(longBreakTime * 60\\);\n        } else if \\(breakTime > 0\\) {\n          setMode\\('break'\\);\n          setTimeLeft\\(breakTime * 60\\);\n        } else {\n          setMode\\('work'\\);\n          setTimeLeft\\(workTime * 60\\);\n        }\n      } else {\n        // break or longBreak finished\n        setMode\\('work'\\);\n        setTimeLeft\\(workTime * 60\\);\n      }\n    }\n\n    return \\(\\) => {\n      if \\(interval\\) clearInterval\\(interval\\);\n    };\n  }, [isRunning, timeLeft, mode, workTime, breakTime, longBreakTime, longBreakInterval, alarm, activeLabel, onSessionComplete]\\);\n\n  const toggle = useCallback\\(\\(\\) => {\n    setIsRunning\\(\\(prev\\) => {\n      analytics.track\\({ name: prev ? 'timer_paused' : 'timer_started' }\\);\n      return !prev;\n    }\\);\n  }, []\\);\n\n  const reset = useCallback\\(\\(\\) => {\n    setIsRunning\\(false\\);\n    setMode\\('work'\\);\n    setTimeLeft\\(workTime * 60\\);\n    completedSessionsRef.current = 0;\n    analytics.track\\({ name: 'timer_reset' }\\);\n  }, [workTime]\\);\n\n  return { timeLeft, isRunning, mode, toggle, reset };\n}\nEOF)",
      "Bash(\"C:\\\\tmp\\\\pomodoro-build\\\\src\\\\types\\\\timer.ts\" << 'EOF'\nexport type TimerMode = 'work' | 'break' | 'longBreak';\nEOF)",
      "Bash(python3:*)",
      "Bash(node -e:*)",
      "Bash(node:*)",
      "Bash(powershell -Command \"\n$content = @''\nimport { useState } from \"\"react\"\";\nimport { X, Download } from \"\"lucide-react\"\";\nimport type { DayData, MonthDayData } from \"\"@/hooks/useSessions\"\";\nimport { useI18n } from \"\"@/contexts/I18nContext\"\";\nimport type { PomodoroSession } from \"\"@/types/session\"\";\n\ntype StatTab = \"\"weekly\"\" | \"\"monthly\"\" | \"\"yearly\"\";\n\ninterface StatsChartProps {\n  sessions: PomodoroSession[];\n  getWeekData: \\(offset: number\\) => DayData[];\n  getMonthData: \\(offset: number\\) => MonthDayData[];\n  getYearData: \\(offset: number\\) => { month: string; count: number; totalSeconds: number }[];\n  onClose: \\(\\) => void;\n}\n\nfunction formatDuration\\(seconds: number\\): string {\n  if \\(seconds <= 0\\) return \"\"0min\"\";\n  const h = Math.floor\\(seconds / 3600\\);\n  const m = Math.floor\\(\\(seconds % 3600\\) / 60\\);\n  if \\(h > 0\\) return h + \"\"h \"\" + m + \"\"m\"\";\n  return m + \"\"min\"\";\n}\n\nexport { formatDuration };\n''@\nSet-Content -Path ''C:\\\\tmp\\\\pomodoro-build\\\\src\\\\components\\\\stats\\\\StatsChart.tsx'' -Value $content -Encoding UTF8\nWrite-Host ''written''\n\")",
      "Bash(powershell -Command \"\n$lines = @\\(\n  ''import { useState } from ''''react'''';'',\n  ''import { X, Download } from ''''lucide-react'''';'',\n  ''import type { DayData, MonthDayData } from ''''@/hooks/useSessions'''';'',\n  ''import { useI18n } from ''''@/contexts/I18nContext'''';'',\n  ''import type { PomodoroSession } from ''''@/types/session'''';'',\n  '''',\n  ''type StatTab = ''''weekly'''' | ''''monthly'''' | ''''yearly'''';'',\n  '''',\n  ''interface StatsChartProps {'',\n  ''  sessions: PomodoroSession[];'',\n  ''  getWeekData: \\(offset: number\\) => DayData[];'',\n  ''  getMonthData: \\(offset: number\\) => MonthDayData[];'',\n  ''  getYearData: \\(offset: number\\) => { month: string; count: number; totalSeconds: number }[];'',\n  ''  onClose: \\(\\) => void;'',\n  ''}'',\n  '''',\n  ''function formatDuration\\(seconds: number\\): string {'',\n  ''  if \\(seconds <= 0\\) return ''''0min'''';'',\n  ''  const h = Math.floor\\(seconds / 3600\\);'',\n  ''  const m = Math.floor\\(\\(seconds % 3600\\) / 60\\);'',\n  ''  if \\(h > 0\\) return h + ''''h '''' + m + ''''m'''';'',\n  ''  return m + ''''min'''';'',\n  ''}'',\n  ''''\n\\)\n$content = $lines -join \\\\`\\\\`n\n[System.IO.File]::WriteAllText\\(''C:\\\\tmp\\\\pomodoro-build\\\\src\\\\components\\\\stats\\\\StatsChart_part1.tsx'', $content, [System.Text.Encoding]::UTF8\\)\nWrite-Host ''part1 done, lines:'' $lines.Count\n\")",
      "Bash(powershell -Command:*)",
      "Bash(echo:*)",
      "Bash(git commit:*)"
    ]
  }
}
